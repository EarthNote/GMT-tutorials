======================================
繪製向量式資料
======================================

地理空間資料通常會以網格形式或向量形式儲存。所謂的向量式資料，其實就是描述「點、線、面」位置與形狀的資料。\
有關於如何繪製點資料的技巧，我們已經在「\ :doc:`scatter_plot`\ 」一章中提及，因此在本章中，將會\
說明如何利用 GMT 繪製線段以及多邊形、簡介與 GMT 相容的向量式資料檔案格式，以及透明度的設定--這種填色技巧\
非常適合用在常常需要疊在一起呈現的向量式資料上。

目標
--------------------------------------
繪製一張\ `七巧板 <https://zh.wikipedia.org/wiki/%E4%B8%83%E5%B7%A7%E6%9D%BF>`_\ 的盤面，如下所示。\
七巧板是一種類似拼圖的玩具，遊玩目標通常是利用 7 個多邊形拼出指定的圖案。這邊拼出的是正方形，也是所有的圖案裡最基本\
的一種。

在此圖中，七個多邊形顏色均不相同，但都有黑色邊緣，而且在盤面上還有淡色的棋盤式格子，可以幫助你計算每個多邊形的\
大小。要讓這些線條與多邊形的顏色同時呈現，我們必須要在色階檔中加上透明度的設定，並且使用不同的出圖指令。

.. _最終版圖片:

.. image:: plot_vector_data/tangram.png

直接觀看\ `指令稿`_


使用的指令與概念
--------------------------------------


前置作業
--------------------------------------


操作流程
--------------------------------------


指令稿
--------------------------------------
本地圖的最終指令稿如下：

.. code-block:: bash

    # ==== 設定變數 ====
    out_ps="tangram.ps"
    in_cpt="tangram.cpt"

    # ==== 製作含有透明度的色階檔 ====
    makecpt -Cwysiwyg -A70 > $in_cpt

    # ==== 開門 (寫入 PS 檔頭) ====
    psxy -R0/4/0/4 -JX15c -T -K -P > $out_ps

    # ==== 畫線、畫多邊形 ====
    # 注意線和多邊形的樣式設定其實是寫在各自的檔案中！
    psxy lines.txt -R -J -O -K >> $out_ps
    psxy pieces.txt -R -J -O -K -L -C$in_cpt >> $out_ps

    # ==== 關門 (寫入 EOF) ====
    psxy -R -J -O -T >> $out_ps

    # ==== 轉成 png 檔並保留透明度設定 ====
    ps2raster $out_ps -A -P -Tg

線段資料 ``lines.txt``：

.. code-block:: bash

    > -W1p,grey,.
    1 0
    1 4
    >
    2 0
    2 4
    >
    3 0
    3 4
    >
    0 1
    4 1
    >
    0 2
    4 2
    >
    0 3
    4 3
    > -W2p,black
    0 0
    4 0
    4 4
    0 4
    0 0
    > 
    0 4
    4 0
    > 
    0 0
    3 3
    > 
    3 1
    3 3
    > 
    1 3
    2 4
    > 
    2 4
    4 2

多邊形資料 ``pieces.txt``：

.. code-block:: bash

    > -Z0
    0 0
    2 2
    4 0
    > -Z3
    0 0
    2 2
    0 4
    > -Z6
    0 4
    1 3
    2 4
    > -Z9
    1 3
    2 4
    3 3
    2 2
    > -Z12
    3 3
    2 2
    3 1
    > -Z15
    3 1
    3 3
    4 2
    4 0
    > -Z18
    2 4
    4 2
    4 4

.. note::

    「」

觀看\ `最終版圖片`_

習題
--------------------------------------

